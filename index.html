<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HalalFind AI - Halal Discovery & Guidance</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { 
            font-family: 'Inter', sans-serif; 
        }
        .chat-message {
            animation: fadeIn 0.3s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .loading-dots span {
            animation: blink 1.4s infinite;
        }
        .loading-dots span:nth-child(2) {
            animation-delay: 0.2s;
        }
        .loading-dots span:nth-child(3) {
            animation-delay: 0.4s;
        }
        @keyframes blink {
            0%, 80%, 100% { opacity: 0; }
            40% { opacity: 1; }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-emerald-50 to-teal-50 min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-emerald-800 mb-2">üïå HalalFind AI</h1>
            <p class="text-slate-600">Your AI companion for Halal food discovery and guidance</p>
        </div>

        <!-- Main Card -->
        <div class="bg-white rounded-2xl shadow-xl overflow-hidden">
            <!-- Chat Container -->
            <div id="chatContainer" class="h-96 overflow-y-auto p-6 space-y-4 bg-slate-50">
                <div class="chat-message bg-emerald-100 rounded-lg p-4 max-w-md">
                    <p class="text-sm text-emerald-900">
                        <strong>HalalFind AI:</strong> Assalamu Alaikum! üëã I'm here to help you with:
                        <br>‚Ä¢ Finding Halal restaurants near you
                        <br>‚Ä¢ Checking if ingredients are Halal
                        <br>‚Ä¢ Answering questions about Halal food
                        <br>‚Ä¢ Recipe suggestions and cooking tips
                        <br><br>How can I assist you today?
                    </p>
                </div>
            </div>

            <!-- Input Area -->
            <div class="p-4 bg-white border-t border-slate-200">
                <div class="flex gap-2">
                    <input 
                        type="text" 
                        id="userInput" 
                        placeholder="Ask about Halal food, ingredients, or restaurants..."
                        class="flex-1 px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500"
                        onkeypress="if(event.key === 'Enter') sendMessage()"
                    >
                    <button 
                        onclick="sendMessage()" 
                        class="px-6 py-3 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition font-semibold"
                    >
                        Send
                    </button>
                </div>
                <div class="mt-3 text-xs text-slate-500 text-center">
                    Powered by Google AI ‚Ä¢ Enter your API key in the code to enable
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="mt-6 grid grid-cols-2 md:grid-cols-4 gap-3">
            <button onclick="quickQuery('Is this ingredient Halal?')" class="p-3 bg-white rounded-lg shadow hover:shadow-md transition text-sm font-medium text-slate-700">
                üîç Check Ingredient
            </button>
            <button onclick="quickQuery('Find Halal restaurants near me')" class="p-3 bg-white rounded-lg shadow hover:shadow-md transition text-sm font-medium text-slate-700">
                üìç Find Restaurants
            </button>
            <button onclick="quickQuery('Halal chicken recipe')" class="p-3 bg-white rounded-lg shadow hover:shadow-md transition text-sm font-medium text-slate-700">
                üç≥ Get Recipes
            </button>
            <button onclick="quickQuery('What makes food Halal?')" class="p-3 bg-white rounded-lg shadow hover:shadow-md transition text-sm font-medium text-slate-700">
                üìö Learn About Halal
            </button>
        </div>
    </div>

    <script type="module">
        // ‚ö†Ô∏è IMPORTANT: Replace with your actual Google AI API key
        const API_KEY = 'YOUR_GOOGLE_AI_API_KEY_HERE';
        
        const chatContainer = document.getElementById('chatContainer');
        const userInput = document.getElementById('userInput');

        // Function to add message to chat
        function addMessage(text, isUser = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `chat-message ${isUser ? 'bg-emerald-600 text-white ml-auto' : 'bg-white'} rounded-lg p-4 max-w-md ${isUser ? 'text-right' : ''}`;
            
            const content = document.createElement('p');
            content.className = 'text-sm';
            content.innerHTML = isUser 
                ? `<strong>You:</strong> ${text}`
                : `<strong>HalalFind AI:</strong> ${text}`;
            
            messageDiv.appendChild(content);
            chatContainer.appendChild(messageDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        // Function to show loading
        function showLoading() {
            const loadingDiv = document.createElement('div');
            loadingDiv.id = 'loading';
            loadingDiv.className = 'chat-message bg-white rounded-lg p-4 max-w-md';
            loadingDiv.innerHTML = '<p class="text-sm loading-dots">Thinking<span>.</span><span>.</span><span>.</span></p>';
            chatContainer.appendChild(loadingDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        // Function to remove loading
        function removeLoading() {
            const loading = document.getElementById('loading');
            if (loading) loading.remove();
        }

        // Send message function
        window.sendMessage = async function() {
            const message = userInput.value.trim();
            if (!message) return;

            // Add user message
            addMessage(message, true);
            userInput.value = '';

            // Check if API key is set
            if (API_KEY === 'AIzaSyBbQvKPrllbH_mho5GKezti2RJzHST15r8') {
                addMessage('‚ö†Ô∏è Please add your Google AI API key in the code to enable AI responses. Get your free API key at https://aistudio.google.com/app/apikey', false);
                return;
            }

            // Show loading
            showLoading();

            try {
                // Call Google AI API
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${API_KEY}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: `You are HalalFind AI, a helpful assistant specialized in Halal food guidance. Answer this question: ${message}`
                            }]
                        }]
                    })
                });

                const data = await response.json();
                removeLoading();

                if (data.candidates && data.candidates[0]) {
                    const aiResponse = data.candidates[0].content.parts[0].text;
                    addMessage(aiResponse, false);
                } else {
                    addMessage('Sorry, I couldn\'t process that request. Please try again.', false);
                }
            } catch (error) {
                removeLoading();
                addMessage('Error connecting to AI service. Please check your API key and internet connection.', false);
                console.error('Error:', error);
            }
        };

        // Quick query function
        window.quickQuery = function(query) {
            userInput.value = query;
            sendMessage();
        };
    </script>
</body>
</html>
